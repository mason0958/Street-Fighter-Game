<!DOCTYPE html>
<html>
<head>
	<title>Canvas Game</title>
	<!-- <link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css">
	<link rel="stylesheet" type="text/css" media="screen" href="style.css"> -->


</head>
<body>
	<script type="text/javascript">


		
		var canvas = document.createElement('canvas');

		var context = canvas.getContext('2d');

		canvas.width = 512;
		canvas.height = 488;

		document.body.appendChild(canvas);

		var backgroundImage = new Image();
		backgroundImage.src = "background.png";

		var hero = new Image();
		hero.src = "hero.png"
		var heroLocation = {
			x: 100,
			y: 100
		}

		var monster = new Image();
		monster.src = "monster.png"
		var monsterLocation = {
			x: 200,
			y: 100
		}

		var keysDown = [];

		addEventListener('keyup', function(event) {

			delete keysDown[event.keyCode];

		});

		addEventListener('keydown', function(event){
			keysDown[event.keyCode] = true;
		});
		

		// addEventListener('keydown', function(event){
		// //if keydown = 39 = right
		// // keydown 40 = down 
		// // keydown keydown 38 = up
		// // keydown 37 = left
		// // keydown 39 = right

		// 	keysDown[event.keyCode] = true;
		// 	console.log(keysDown);
		// });

		var speedModifier = .3;


		//listen to the keydown event
		addEventListener('keydown', function(event){
			console.log(event.key);

			if(event.key === 'ArrowUp') {
				console.log('User pressed the arrow up key');
				heroLocation.y -= (10 * speedModifier);
			}
			if(event.key === 'ArrowDown') {
				console.log('User pressed the arrow down key');
				heroLocation.y += (10 * speedModifier);
			}
			if(event.key === 'ArrowLeft') {
				console.log('User pressed the arrow left key');
				heroLocation.x -= (10 * speedModifier);
			}
			if(event.key === 'ArrowRight') {
				console.log('User pressed the arrow right key');
				heroLocation.x += (10 * speedModifier);
			}
		});

		function update() {

			//user pressed right at some point because it's in the array
			if(39 in keysDown){
				if(heroLocation.x < 450) {
					heroLocation.x += (10 * speedModifier);
				}
			}
			if(37 in keysDown){
				heroLocation.x -= (10 * speedModifier);
			}
			if(38 in keysDown){
				heroLocation.y -= (10 * speedModifier);
			}
			if(40 in keysDown){
				heroLocation.y += (10 * speedModifier);
			}
			if(heroLocation.x <= monsterLocation.x + 32 && heroLocation.y <= monsterLocation.y + 32 && monsterLocation.x <= heroLocation.x + 32 && monsterLocation.y <= heroLocation.y + 32){
				console.log("hero is left of the goblin.")
			}

		}

		function draw() {
			update();
			context.drawImage(backgroundImage,0,0);
			context.drawImage(hero,heroLocation.x,heroLocation.y);
			context.drawImage(monster, monsterLocation.x, monsterLocation.y);
			requestAnimationFrame(draw);
		}

		draw();


		
	</script>
	
</body>
</html>